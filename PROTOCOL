==== DISPLAY DUMPING ====

Whenever the server find it cool, it proceeds to dump game information to the display client with following order:

Server> Game
Server> n_robots  (uint32)
Server> Robot     (n_robots items)
Server> n_bullets (uint32)
Server> Bullet    (n_bullet items)





==== ROBOT INTELLIGCENCE COMMUNICATION ====

=== Connection and waiting phase ===

When the client connects, he first sends the magic word (0xXX) and protocol version (0x01).

Client> 0xXX 0x01

The server then sends back the two bytes:

Server> 0xXX 0x01

It then proceed to send information about the game:

Server> Game

At this point, the server considers that the client is fully connected and waiting for a game. Every time the number of currently connected clients (n_clients) changes the server sends its new value to *every* connected client:

Server> n_clients (uint32)

= Example =

S wait for connections. A connects and gets:

Server>A 0xXX 0x01 1024 768 2 1

For there are currently one connected client (A). Then, B too connects to S and the servers sends:

Server>B 0xXX 0x01 1024 768 2 2
Server>A 2

In other words, the server send the new number of currently connected clients to both A and B.




=== Initialization phase ===

When n_clients reaches n_slots, the game is settled and the server sends to each client the initial state of its robot:

Server > Robot (sea Robot information)

When the game is ready to start, the server sends the start message (0x42) to every client:

Server > 0x42

From now on, the servers only sends data for in-game events concerning the client, and the clients only sends data for client's robot orders.




=== Game phase ===

== Orders ==

= Movement =

The movement orders are ADVANCE (0x01), TURN (0x02) and TURNGUN (0x03). They actually sets the (may be negative) at which the robot moves forward, turn to the right, or turn its gun to the right. The parameter is the desired speed.

Client > COMMAND
Client > speed   (float)


= FIRE =

This makes the robot to fire a bullet of energy immediatly. The parameter is the desired amount of energy in the bullet:

Client > 0x04
Client > energy (float)



== Events ==

= TICK =

A tick is the atomic unit of time in a game. At every tick, the server broadcast a tick event:

Server > 0x01


= SPOTTED =

Whenever another robot is in sight, the client gets this event:

Server > 0x02
Server > Robot (see Robot information)


= HIT =


= HITBY =

= COLLIDE =



==== GENERIC DATA TRANSFERS ====

== Game information ==

General information about the game are sent following the scheme:

> width     (float)
> height    (float)
> n_slots   (uint32)
> n_clients (uint32)

== Robot information ==

When a robot's data need to be sent, the following scheme is used:

> x            (float)
> y            (float)
> width        (float)
> height       (float)
> angle        (float)
> gunAngle     (float)
> energy       (float)
> velocity     (float)
> turnSpeed    (float)
> turnGunSpeed (float)


== Bullet information ==

When a bullet's data need to be sent, the following scheme is used:

> x      (float)
> y      (float)
> angle  (float)
> energy (float)
